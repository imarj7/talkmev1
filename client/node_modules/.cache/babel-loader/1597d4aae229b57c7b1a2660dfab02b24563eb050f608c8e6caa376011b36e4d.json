{"ast":null,"code":"import _toConsumableArray from\"/Users/aniket/Documents/GitHub/chatappv1/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/aniket/Documents/GitHub/chatappv1/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/aniket/Documents/GitHub/chatappv1/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/aniket/Documents/GitHub/chatappv1/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/aniket/Documents/GitHub/chatappv1/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from'react';import pic from'../../assets/pic.jpg';// import img from 'favicon.png';\nimport Input from'../../components/Input';import{io}from'socket.io-client';import'./Dashboard.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _messages$receiver3,_messages$receiver4,_messages$receiver5,_messages$messages,_messages$receiver6;var _useState=useState(JSON.parse(localStorage.getItem('user:detail'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),conversations=_useState4[0],setConversations=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),messages=_useState6[0],setMessages=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),users=_useState10[0],setUsers=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),socket=_useState12[0],setSocket=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),showFriends=_useState14[0],setShowFriends=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),loading=_useState16[0],setLoading=_useState16[1];var messageRef=useRef(null);var navigate=useNavigate();useEffect(function(){console.log('Setting up socket...');var newSocket=io('http://localhost:8080');setSocket(newSocket);newSocket.emit('addUser',user===null||user===void 0?void 0:user.id);newSocket.on('getUsers',function(users){console.log('activeUsers :>> ',users);});newSocket.on('getMessage',function(data){console.log('Received message: ',data);;});return function(){console.log('Cleaning up socket...');newSocket.disconnect();};},[user===null||user===void 0?void 0:user.id]);useEffect(function(){var _messageRef$current;messageRef===null||messageRef===void 0?void 0:(_messageRef$current=messageRef.current)===null||_messageRef$current===void 0?void 0:_messageRef$current.scrollIntoView({behavior:'smooth'});},[messages===null||messages===void 0?void 0:messages.messages]);var fetchConversations=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var loggedInUser,res,resData,uniqueConversations;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:loggedInUser=JSON.parse(localStorage.getItem('user:detail'));_context.next=3;return fetch(\"http://localhost:8000/api/conversations/\".concat(loggedInUser===null||loggedInUser===void 0?void 0:loggedInUser.id),{method:'GET',headers:{'Content-Type':'application/json'}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:resData=_context.sent;uniqueConversations=resData.reduce(function(acc,current){var x=acc.find(function(item){return item.user.email===current.user.email;});if(!x){return acc.concat([_objectSpread(_objectSpread({},current),{},{unseenCount:0})]);}else{return acc;}},[]);localStorage.setItem('uniqueConversations',JSON.stringify(uniqueConversations));setConversations(uniqueConversations);case 10:case\"end\":return _context.stop();}},_callee);}));return function fetchConversations(){return _ref.apply(this,arguments);};}();useEffect(function(){var storedConversations=JSON.parse(localStorage.getItem('uniqueConversations'));if(storedConversations){setConversations(storedConversations);}else{fetchConversations();}},[]);useEffect(function(){var fetchUsers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,resData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:8000/api/users/\".concat(user===null||user===void 0?void 0:user.id),{method:'GET',headers:{'Content-Type':'application/json'}});case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:resData=_context2.sent;setUsers(resData);case 7:case\"end\":return _context2.stop();}},_callee2);}));return function fetchUsers(){return _ref2.apply(this,arguments);};}();fetchUsers();},[user===null||user===void 0?void 0:user.id]);var fetchMessages=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(conversationId,receiver){var id,createConvoRes,createConvoData,res,resData;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:id=conversationId;if(!(conversationId==='new')){_context3.next=9;break;}_context3.next=4;return fetch(\"http://localhost:8000/api/conversations\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({senderId:user===null||user===void 0?void 0:user.id,receiverId:receiver===null||receiver===void 0?void 0:receiver.receiverId})});case 4:createConvoRes=_context3.sent;_context3.next=7;return createConvoRes.json();case 7:createConvoData=_context3.sent;id=createConvoData.conversationId;case 9:_context3.next=11;return fetch(\"http://localhost:8000/api/message/\".concat(id,\"?senderId=\").concat(user===null||user===void 0?void 0:user.id,\"&receiverId=\").concat(receiver===null||receiver===void 0?void 0:receiver.receiverId),{method:'GET',headers:{'Content-Type':'application/json'}});case 11:res=_context3.sent;_context3.next=14;return res.json();case 14:resData=_context3.sent;setMessages({messages:resData,receiver:receiver,conversationId:id});fetchConversations();case 17:case\"end\":return _context3.stop();}},_callee3);}));return function fetchMessages(_x,_x2){return _ref3.apply(this,arguments);};}();var sendMessage=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var _messages$receiver;var newMessage,_messages$receiver2,createConvoRes,createConvoData;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!(message.trim()==='')){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:newMessage={senderId:user===null||user===void 0?void 0:user.id,receiverId:messages===null||messages===void 0?void 0:(_messages$receiver=messages.receiver)===null||_messages$receiver===void 0?void 0:_messages$receiver.receiverId,message:message,conversationId:messages===null||messages===void 0?void 0:messages.conversationId};setMessages(function(prev){return _objectSpread(_objectSpread({},prev),{},{messages:[].concat(_toConsumableArray(prev.messages),[{user:{id:user===null||user===void 0?void 0:user.id},message:message}])});});setMessage('');socket===null||socket===void 0?void 0:socket.emit('sendMessage',newMessage);if(!(newMessage.conversationId==='new')){_context4.next=14;break;}_context4.next=9;return fetch(\"http://localhost:8000/api/conversations\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({senderId:user===null||user===void 0?void 0:user.id,receiverId:messages===null||messages===void 0?void 0:(_messages$receiver2=messages.receiver)===null||_messages$receiver2===void 0?void 0:_messages$receiver2.receiverId})});case 9:createConvoRes=_context4.sent;_context4.next=12;return createConvoRes.json();case 12:createConvoData=_context4.sent;newMessage.conversationId=createConvoData.conversationId;case 14:_context4.next=16;return fetch(\"http://localhost:8000/api/message\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(newMessage)});case 16:fetchConversations();case 17:case\"end\":return _context4.stop();}},_callee4);}));return function sendMessage(){return _ref4.apply(this,arguments);};}();var handleKeyDown=function handleKeyDown(e){if((e.key==='Enter'||e.key==='Return'||e.keyCode===13)&&!loading){e.preventDefault();sendMessage();}};var handleLogout=function handleLogout(){localStorage.removeItem('user:detail');localStorage.removeItem('user:token');localStorage.removeItem('uniqueConversations');navigate('/users/sign_in');};return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center min-h-[100vh] bg-image\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex relative w-[90%] h-[90vh] shadow-lg  border border-main rounded-3xl overflow-none\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-[35%] h-full bg-secondary border-r-2 border-main rounded-3xl \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center my-8 mx-10 \",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:pic,width:75,height:75,className:\"border border-primary p-[2px] rounded-full\",alt:\"User Profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl text-white font-bold\",children:user===null||user===void 0?void 0:user.fullName}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"text-md mt-1 font-bold text-[#fa9500]\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-7 mt-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-main text-lg font-semibold\",children:\"Messages\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-scroll h-[450px]\",children:conversations.length>0?conversations.map(function(_ref5){var conversationId=_ref5.conversationId,user=_ref5.user,unseenCount=_ref5.unseenCount;return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center py-6 border-b border-b-gray-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cursor-pointer flex items-center\",onClick:function onClick(){return fetchMessages(conversationId,user);},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:pic,className:\"w-[60px] h-[60px] rounded-full p-[2px] border border-primary\",alt:\"User Profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg text-white font-semibold\",children:user===null||user===void 0?void 0:user.fullName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-white text-gray-600\",children:user===null||user===void 0?void 0:user.email})]})]})},conversationId);}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-white text-lg font-semibold mt-[90%]\",children:\"No Conversations\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-[60%] h-full bg-white flex flex-col items-center rounded-3xl\",children:[(messages===null||messages===void 0?void 0:(_messages$receiver3=messages.receiver)===null||_messages$receiver3===void 0?void 0:_messages$receiver3.fullName)&&/*#__PURE__*/_jsxs(\"div\",{className:\"w-[75%] bg-secondary h-[80px] my-10 rounded-full flex items-center px-14 py-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cursor-pointer\",children:/*#__PURE__*/_jsx(\"img\",{src:pic,width:60,height:60,className:\"rounded-full\",alt:\"Receiver Profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-6 mr-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg text-white font-bold\",children:messages===null||messages===void 0?void 0:(_messages$receiver4=messages.receiver)===null||_messages$receiver4===void 0?void 0:_messages$receiver4.fullName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-light text-gray-600 text-white\",children:messages===null||messages===void 0?void 0:(_messages$receiver5=messages.receiver)===null||_messages$receiver5===void 0?void 0:_messages$receiver5.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-[90%] w-[90%] overflow-scroll shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 right-0\",children:/*#__PURE__*/_jsx(\"img\",{src:\"favicon.png\",alt:\"Logo\",className:\"w-[65px] h-18\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-20\",children:[(messages===null||messages===void 0?void 0:(_messages$messages=messages.messages)===null||_messages$messages===void 0?void 0:_messages$messages.length)>0?messages.messages.map(function(_ref6,index){var message=_ref6.message,_ref6$user=_ref6.user,_ref6$user2=_ref6$user===void 0?{}:_ref6$user,id=_ref6$user2.id;return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-[55%] h-auto font-normal rounded-b-xl p-4 mb-9 text-white \".concat(id===(user===null||user===void 0?void 0:user.id)?'ml-auto bg-blacky text-white rounded-tl-xl':'mr-auto bg-light rounded-tr-xl text-primary'),children:/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:message})},index);}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-black font-semibold text-lg mt-[90%]\",children:\"No Messages\"}),/*#__PURE__*/_jsx(\"div\",{ref:messageRef})]})]}),(messages===null||messages===void 0?void 0:(_messages$receiver6=messages.receiver)===null||_messages$receiver6===void 0?void 0:_messages$receiver6.fullName)&&/*#__PURE__*/_jsxs(\"div\",{className:\"w-[80%] h-[200px] flex items-center\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Type a message...\",value:message,onKeyDown:handleKeyDown,onChange:function onChange(e){return setMessage(e.target.value);},className:\"w-[90%]\",inputClassName:\"p-4 border-0 shadow-lg font-semibold rounded-full focus:ring-0 focus:border-0 outline-none\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-7 p-2 cursor-pointer bg-light rounded-full \".concat(!message&&'pointer-events-none'),onClick:sendMessage,children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"icon icon-tabler icon-tabler-send\",width:\"30\",height:\"30\",viewBox:\"0 0 24 24\",strokeWidth:\"1.5\",stroke:\"white\",fill:\"none\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{stroke:\"none\",d:\"M0 0h24v24H0z\",fill:\"none\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"10\",y1:\"14\",x2:\"21\",y2:\"3\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M21 3l-6.5 18a0.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a0.55 .55 0 0 1 0 -1l18 -6.5\"})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-[5%] h-full bg-light px-8 py-16 flex flex-col items-center justify-center border-l-2 border-main rounded-3xl\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"toggle-friends-button\",onClick:function onClick(){return setShowFriends(!showFriends);},children:[/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"icon icon-tabler icon-tabler-chevron-\".concat(showFriends?'left':'right'),width:\"40\",height:\"40\",viewBox:\"0 0 24 24\",strokeWidth:\"1.5\",stroke:\"white\",fill:\"none\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{stroke:\"none\",d:\"M0 0h24h24H0z\",fill:\"none\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"15 6 9 12 15 18\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-white font-normal\",children:showFriends?'':'Friend List'})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-[25%] h-[90vh] bg-light fixed px-8 py-16  sidebar \".concat(showFriends?'open':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"close-friends-button\",onClick:function onClick(){return setShowFriends(false);},children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"icon icon-tabler icon-tabler-x\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",strokeWidth:\"2\",stroke:\"white\",fill:\"none\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{stroke:\"none\",d:\"M0 0h24h24H0z\",fill:\"none\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-main text-lg font-semibold\",children:\"Friends\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-scroll h-[500px]\",children:users.length>0?users.map(function(_ref7){var userId=_ref7.userId,user=_ref7.user;return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center py-8 border-b border-b-gray-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cursor-pointer flex items-center\",onClick:function onClick(){return fetchMessages('new',user);},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:pic,className:\"w-[60px] h-[60px] rounded-full p-[2px] border border-primary\",alt:\"Friend Profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-white\",children:user===null||user===void 0?void 0:user.fullName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-light text-white text-gray-600\",children:user===null||user===void 0?void 0:user.email})]})]})},userId);}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-white text-lg font-semibold mt-[90%]\",children:\"No user found\"})})]})]})});};export default Dashboard;","map":{"version":3,"names":["useEffect","useRef","useState","pic","Input","io","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","_messages$receiver3","_messages$receiver4","_messages$receiver5","_messages$messages","_messages$receiver6","_useState","JSON","parse","localStorage","getItem","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","conversations","setConversations","_useState5","_useState6","messages","setMessages","_useState7","_useState8","message","setMessage","_useState9","_useState10","users","setUsers","_useState11","_useState12","socket","setSocket","_useState13","_useState14","showFriends","setShowFriends","_useState15","_useState16","loading","setLoading","messageRef","navigate","console","log","newSocket","emit","id","on","data","disconnect","_messageRef$current","current","scrollIntoView","behavior","fetchConversations","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","loggedInUser","res","resData","uniqueConversations","wrap","_callee$","_context","prev","next","fetch","concat","method","headers","sent","json","reduce","acc","x","find","item","email","_objectSpread","unseenCount","setItem","stringify","stop","apply","arguments","storedConversations","fetchUsers","_ref2","_callee2","_callee2$","_context2","fetchMessages","_ref3","_callee3","conversationId","receiver","createConvoRes","createConvoData","_callee3$","_context3","body","senderId","receiverId","_x","_x2","sendMessage","_ref4","_callee4","_messages$receiver","newMessage","_messages$receiver2","_callee4$","_context4","trim","abrupt","_toConsumableArray","handleKeyDown","e","key","keyCode","preventDefault","handleLogout","removeItem","className","children","src","width","height","alt","fullName","onClick","length","map","_ref5","_ref6","index","_ref6$user","_ref6$user2","ref","placeholder","value","onKeyDown","onChange","target","inputClassName","xmlns","viewBox","strokeWidth","stroke","fill","strokeLinecap","strokeLinejoin","d","x1","y1","x2","y2","points","_ref7","userId"],"sources":["/Users/aniket/Documents/GitHub/chatappv1/client/src/modules/Dashboard/index.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport pic from '../../assets/pic.jpg';\n// import img from 'favicon.png';\nimport Input from '../../components/Input';\nimport { io } from 'socket.io-client';\nimport './Dashboard.css';\nimport { useNavigate } from 'react-router-dom';\n\nconst Dashboard = () => {\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user:detail')));\n  const [conversations, setConversations] = useState([]);\n  const [messages, setMessages] = useState({});\n  const [message, setMessage] = useState('');\n  const [users, setUsers] = useState([]);\n  const [socket, setSocket] = useState(null);\n  const [showFriends, setShowFriends] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const messageRef = useRef(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    console.log('Setting up socket...');\n    const newSocket = io('http://localhost:8080');\n    setSocket(newSocket);\n\n    newSocket.emit('addUser', user?.id);\n\n    newSocket.on('getUsers', users => {\n      console.log('activeUsers :>> ', users);\n    });\n\n    newSocket.on('getMessage', data => {\n      console.log('Received message: ', data);\n      ;\n      \n    });\n\n    return () => {\n      console.log('Cleaning up socket...');\n      newSocket.disconnect();\n    };\n  }, [user?.id]);\n\n  useEffect(() => {\n    messageRef?.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages?.messages]);\n\n  const fetchConversations = async () => {\n\tconst loggedInUser = JSON.parse(localStorage.getItem('user:detail'));\n\tconst res = await fetch(`http://localhost:8000/api/conversations/${loggedInUser?.id}`, {\n\t  method: 'GET',\n\t  headers: {\n\t\t'Content-Type': 'application/json',\n\t  }\n\t});\n\tconst resData = await res.json();\n  \n\tconst uniqueConversations = resData.reduce((acc, current) => {\n\t  const x = acc.find(item => item.user.email === current.user.email);\n\t  if (!x) {\n\t\treturn acc.concat([{ ...current, unseenCount: 0 }]);\n\t  } else {\n\t\treturn acc;\n\t  }\n\t}, []);\n  \n\tlocalStorage.setItem('uniqueConversations', JSON.stringify(uniqueConversations));\n\tsetConversations(uniqueConversations);\n  };\n  \n  useEffect(() => {\n\tconst storedConversations = JSON.parse(localStorage.getItem('uniqueConversations'));\n\tif (storedConversations) {\n\t  setConversations(storedConversations);\n\t} else {\n\t  fetchConversations();\n\t}\n  }, []);\n  \n  useEffect(() => {\n\tconst fetchUsers = async () => {\n\t  const res = await fetch(`http://localhost:8000/api/users/${user?.id}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t  'Content-Type': 'application/json',\n\t\t}\n\t  });\n\t  const resData = await res.json();\n\t  setUsers(resData);\n\t};\n\tfetchUsers();\n  }, [user?.id]);\n  \n  const fetchMessages = async (conversationId, receiver) => {\n\tlet id = conversationId;\n\t\n\tif (conversationId === 'new') {\n\t  const createConvoRes = await fetch(`http://localhost:8000/api/conversations`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t  'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify({ senderId: user?.id, receiverId: receiver?.receiverId })\n\t  });\n  \n\t  const createConvoData = await createConvoRes.json();\n\t  id = createConvoData.conversationId;\n\t}\n  \n\t// Fetch messages for the conversation\n\tconst res = await fetch(`http://localhost:8000/api/message/${id}?senderId=${user?.id}&receiverId=${receiver?.receiverId}`, {\n\t  method: 'GET',\n\t  headers: {\n\t\t'Content-Type': 'application/json',\n\t  }\n\t});\n  \n\tconst resData = await res.json();\n\tsetMessages({ messages: resData, receiver, conversationId: id });\n\tfetchConversations();\n  };\n  \n  const sendMessage = async () => {\n\tif (message.trim() === '') {\n\t  return;\n\t}\n  \n\tconst newMessage = {\n\t  senderId: user?.id,\n\t  receiverId: messages?.receiver?.receiverId,\n\t  message,\n\t  conversationId: messages?.conversationId,\n\t};\n  \n\tsetMessages(prev => ({\n\t  ...prev,\n\t  messages: [...prev.messages, { user: { id: user?.id }, message }],\n\t}));\n\tsetMessage('');\n  \n\tsocket?.emit('sendMessage', newMessage);\n  \n\tif (newMessage.conversationId === 'new') {\n\t  const createConvoRes = await fetch(`http://localhost:8000/api/conversations`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t  'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify({ senderId: user?.id, receiverId: messages?.receiver?.receiverId })\n\t  });\n  \n\t  const createConvoData = await createConvoRes.json();\n\t  newMessage.conversationId = createConvoData.conversationId;\n\t}\n  \n\tawait fetch(`http://localhost:8000/api/message`, {\n\t  method: 'POST',\n\t  headers: {\n\t\t'Content-Type': 'application/json',\n\t  },\n\t  body: JSON.stringify(newMessage)\n\t});\n  \n\tfetchConversations();\n  };\n  \n  const handleKeyDown = (e) => {\n    if ((e.key === 'Enter' || e.key === 'Return' || e.keyCode === 13) && !loading) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('user:detail');\n    localStorage.removeItem('user:token');\n    localStorage.removeItem('uniqueConversations');\n    navigate('/users/sign_in');\n  };\n\n  return (\n    <div className='flex justify-center items-center min-h-[100vh] bg-image'>\n  <div className=\"flex relative w-[90%] h-[90vh] shadow-lg  border border-main rounded-3xl overflow-none\">\n    {/* Left Section */}\n    <div className=\"w-[35%] h-full bg-secondary border-r-2 border-main rounded-3xl \">\n      <div className=\"flex items-center my-8 mx-10 \">\n        <div><img src={pic} width={75} height={75} className=\"border border-primary p-[2px] rounded-full\" alt=\"User Profile\" /></div>\n        <div className=\"ml-6\">\n          <h3 className=\"text-xl text-white font-bold\">{user?.fullName}</h3>\n          {/* <p className=\"text-lg text-white\">My Account</p> */}\n          <button onClick={handleLogout} className=\"text-md mt-1 font-bold text-[#fa9500]\">Logout</button>\n        </div>\n      </div>\n      <hr />\n      <div className=\"mx-7 mt-10\">\n        <div className=\"text-main text-lg font-semibold\">Messages</div>\n        <div className='overflow-scroll h-[450px]'>\n          {\n            conversations.length > 0 ?\n              conversations.map(({ conversationId, user, unseenCount }) => (\n                <div className=\"flex items-center py-6 border-b border-b-gray-300\" key={conversationId}>\n                  <div className=\"cursor-pointer flex items-center\" onClick={() => fetchMessages(conversationId, user)}>\n                    <div><img src={pic} className=\"w-[60px] h-[60px] rounded-full p-[2px] border border-primary\" alt=\"User Profile\" /></div>\n                    <div className=\"ml-6\">\n                      <h3 className=\"text-lg text-white font-semibold\">{user?.fullName}</h3>\n                      <p className=\"text-sm text-white text-gray-600\">{user?.email}</p>\n                      {/* {unseenCount > 0 && <div className=\"text-sm text-red-500\">{unseenCount} new messages</div>} */}\n                    </div>\n                  </div>\n                </div>\n              )) : <div className=\"text-center text-white text-lg font-semibold mt-[90%]\">No Conversations</div>\n          }\n        </div>\n      </div>\n    </div>\n\n    {/* Middle Section */}\n    <div className=\"w-[60%] h-full bg-white flex flex-col items-center rounded-3xl\">\n      {\n        messages?.receiver?.fullName &&\n        <div className=\"w-[75%] bg-secondary h-[80px] my-10 rounded-full flex items-center px-14 py-2\">\n          <div className=\"cursor-pointer\"><img src={pic} width={60} height={60} className=\"rounded-full\" alt=\"Receiver Profile\" /></div>\n          <div className=\"ml-6 mr-auto\">\n            <h3 className=\"text-lg text-white font-bold\">{messages?.receiver?.fullName}</h3>\n            <p className=\"text-sm font-light text-gray-600 text-white\">{messages?.receiver?.email}</p>\n          </div>\n        </div>\n      }\n      <div className=\"h-[90%] w-[90%] overflow-scroll shadow-sm\">\n        <div className=\"absolute top-0 right-0\">\n          <img src=\"favicon.png\" alt=\"Logo\" className=\"w-[65px] h-18\" />\n        </div>\n        <div className=\"p-20\">\n          {\n            messages?.messages?.length > 0 ?\n              messages.messages.map(({ message, user: { id } = {} }, index) => (\n                <div className={`max-w-[55%] h-auto font-normal rounded-b-xl p-4 mb-9 text-white ${id === user?.id ? 'ml-auto bg-blacky text-white rounded-tl-xl' : 'mr-auto bg-light rounded-tr-xl text-primary'}`} key={index}>\n                  <div className=\"message-content\">\n                  {message}\n                  </div>\n                </div>\n              )) : <div className=\"text-center text-black font-semibold text-lg mt-[90%]\">No Messages</div>\n          }\n          <div ref={messageRef} />\n        </div>\n      </div>\n      {\n        messages?.receiver?.fullName &&\n        <div className=\"w-[80%] h-[200px] flex items-center\">\n          <Input\n            placeholder=\"Type a message...\"\n            value={message}\n            onKeyDown={handleKeyDown}\n            onChange={(e) => setMessage(e.target.value)}\n            className=\"w-[90%]\"\n            inputClassName=\"p-4 border-0 shadow-lg font-semibold rounded-full focus:ring-0 focus:border-0 outline-none\"\n          />\n          <div className={`ml-7 p-2 cursor-pointer bg-light rounded-full ${!message && 'pointer-events-none'}`} onClick={sendMessage}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-tabler icon-tabler-send\" width=\"30\" height=\"30\" viewBox=\"0 0 24 24\" strokeWidth=\"1.5\" stroke=\"white\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n              <line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\" />\n              <path d=\"M21 3l-6.5 18a0.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a0.55 .55 0 0 1 0 -1l18 -6.5\" />\n            </svg>\n          </div>\n        </div>\n      }\n    </div>\n\n    {/* Toggle Friends Section */}\n    <div className={`w-[5%] h-full bg-light px-8 py-16 flex flex-col items-center justify-center border-l-2 border-main rounded-3xl`}>\n      <button className=\"toggle-friends-button\" onClick={() => setShowFriends(!showFriends)}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className={`icon icon-tabler icon-tabler-chevron-${showFriends ? 'left' : 'right'}`} width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" strokeWidth=\"1.5\" stroke=\"white\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n          <path stroke=\"none\" d=\"M0 0h24h24H0z\" fill=\"none\"/>\n          <polyline points=\"15 6 9 12 15 18\" />\n        </svg>\n        <div className=\"text-white font-normal\">{showFriends ? '' : 'Friend List'}</div>\n      </button>\n    </div>\n\n    {/* Friend List Section */}\n    <div className={`w-[25%] h-[90vh] bg-light fixed px-8 py-16  sidebar ${showFriends ? 'open' : ''}`}>\n      <div className=\"flex justify-end\">\n        <button className=\"close-friends-button\" onClick={() => setShowFriends(false)}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-tabler icon-tabler-x\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"white\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n            <path stroke=\"none\" d=\"M0 0h24h24H0z\" fill=\"none\"/>\n            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n          </svg>\n        </button>\n      </div>\n      <div className=\"text-main text-lg font-semibold\">Friends</div>\n      <div className='overflow-scroll h-[500px]'>\n        {\n          users.length > 0 ?\n            users.map(({ userId, user }) => (\n              <div className=\"flex items-center py-8 border-b border-b-gray-300\" key={userId}>\n                <div className=\"cursor-pointer flex items-center\" onClick={() => fetchMessages('new', user)}>\n                  <div><img src={pic} className=\"w-[60px] h-[60px] rounded-full p-[2px] border border-primary\" alt=\"Friend Profile\" /></div>\n                  <div className=\"ml-6\">\n                    <h3 className=\"text-lg font-semibold text-white\">{user?.fullName}</h3>\n                    <p className=\"text-sm font-light text-white text-gray-600\">{user?.email}</p>\n                  </div>\n                </div>\n              </div>\n            )) : <div className=\"text-center text-white text-lg font-semibold mt-[90%]\">No user found</div>\n        }\n      </div>\n    </div>\n  </div>\n</div>\n\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"grBAAA,OAASA,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CACnD,MAAO,CAAAC,GAAG,KAAM,sBAAsB,CACtC;AACA,MAAO,CAAAC,KAAK,KAAM,wBAAwB,CAC1C,OAASC,EAAE,KAAQ,kBAAkB,CACrC,MAAO,iBAAiB,CACxB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/C,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,KAAAC,mBAAA,CAAAC,mBAAA,CAAAC,mBAAA,CAAAC,kBAAA,CAAAC,mBAAA,CACtB,IAAAC,SAAA,CAAwBf,QAAQ,CAACgB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAN,SAAA,IAA1EO,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAA0CxB,QAAQ,CAAC,EAAE,CAAC,CAAAyB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/CE,aAAa,CAAAD,UAAA,IAAEE,gBAAgB,CAAAF,UAAA,IACtC,IAAAG,UAAA,CAAgC5B,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA6B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAA8BhC,QAAQ,CAAC,EAAE,CAAC,CAAAiC,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAA0BpC,QAAQ,CAAC,EAAE,CAAC,CAAAqC,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAA/BE,KAAK,CAAAD,WAAA,IAAEE,QAAQ,CAAAF,WAAA,IACtB,IAAAG,WAAA,CAA4BxC,QAAQ,CAAC,IAAI,CAAC,CAAAyC,WAAA,CAAApB,cAAA,CAAAmB,WAAA,IAAnCE,MAAM,CAAAD,WAAA,IAAEE,SAAS,CAAAF,WAAA,IACxB,IAAAG,WAAA,CAAsC5C,QAAQ,CAAC,KAAK,CAAC,CAAA6C,WAAA,CAAAxB,cAAA,CAAAuB,WAAA,IAA9CE,WAAW,CAAAD,WAAA,IAAEE,cAAc,CAAAF,WAAA,IAClC,IAAAG,WAAA,CAA8BhD,QAAQ,CAAC,KAAK,CAAC,CAAAiD,WAAA,CAAA5B,cAAA,CAAA2B,WAAA,IAAtCE,OAAO,CAAAD,WAAA,IAAEE,UAAU,CAAAF,WAAA,IAC1B,GAAM,CAAAG,UAAU,CAAGrD,MAAM,CAAC,IAAI,CAAC,CAC/B,GAAM,CAAAsD,QAAQ,CAAGjD,WAAW,EAAE,CAE9BN,SAAS,CAAC,UAAM,CACdwD,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CACnC,GAAM,CAAAC,SAAS,CAAGrD,EAAE,CAAC,uBAAuB,CAAC,CAC7CwC,SAAS,CAACa,SAAS,CAAC,CAEpBA,SAAS,CAACC,IAAI,CAAC,SAAS,CAAEnC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoC,EAAE,CAAC,CAEnCF,SAAS,CAACG,EAAE,CAAC,UAAU,CAAE,SAAArB,KAAK,CAAI,CAChCgB,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEjB,KAAK,CAAC,CACxC,CAAC,CAAC,CAEFkB,SAAS,CAACG,EAAE,CAAC,YAAY,CAAE,SAAAC,IAAI,CAAI,CACjCN,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEK,IAAI,CAAC,CACvC,CAEF,CAAC,CAAC,CAEF,MAAO,WAAM,CACXN,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CACpCC,SAAS,CAACK,UAAU,EAAE,CACxB,CAAC,CACH,CAAC,CAAE,CAACvC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoC,EAAE,CAAC,CAAC,CAEd5D,SAAS,CAAC,UAAM,KAAAgE,mBAAA,CACdV,UAAU,SAAVA,UAAU,kBAAAU,mBAAA,CAAVV,UAAU,CAAEW,OAAO,UAAAD,mBAAA,iBAAnBA,mBAAA,CAAqBE,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAC7D,CAAC,CAAE,CAACnC,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEA,QAAQ,CAAC,CAAC,CAExB,GAAM,CAAAoC,kBAAkB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,YAAA,CAAAC,GAAA,CAAAC,OAAA,CAAAC,mBAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACtBR,YAAY,CAAGxD,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAA2D,QAAA,CAAAE,IAAA,SAClD,CAAAC,KAAK,4CAAAC,MAAA,CAA4CV,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEd,EAAE,EAAI,CACrFyB,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACV,cAAc,CAAE,kBACf,CACF,CAAC,CAAC,QALIX,GAAG,CAAAK,QAAA,CAAAO,IAAA,CAAAP,QAAA,CAAAE,IAAA,SAMa,CAAAP,GAAG,CAACa,IAAI,EAAE,QAA1BZ,OAAO,CAAAI,QAAA,CAAAO,IAAA,CAEPV,mBAAmB,CAAGD,OAAO,CAACa,MAAM,CAAC,SAACC,GAAG,CAAEzB,OAAO,CAAK,CAC3D,GAAM,CAAA0B,CAAC,CAAGD,GAAG,CAACE,IAAI,CAAC,SAAAC,IAAI,QAAI,CAAAA,IAAI,CAACrE,IAAI,CAACsE,KAAK,GAAK7B,OAAO,CAACzC,IAAI,CAACsE,KAAK,GAAC,CAClE,GAAI,CAACH,CAAC,CAAE,CACT,MAAO,CAAAD,GAAG,CAACN,MAAM,CAAC,CAAAW,aAAA,CAAAA,aAAA,IAAM9B,OAAO,MAAE+B,WAAW,CAAE,CAAC,GAAG,CAAC,CAClD,CAAC,IAAM,CACR,MAAO,CAAAN,GAAG,CACT,CACF,CAAC,CAAE,EAAE,CAAC,CAENtE,YAAY,CAAC6E,OAAO,CAAC,qBAAqB,CAAE/E,IAAI,CAACgF,SAAS,CAACrB,mBAAmB,CAAC,CAAC,CAChFhD,gBAAgB,CAACgD,mBAAmB,CAAC,CAAC,yBAAAG,QAAA,CAAAmB,IAAA,MAAA1B,OAAA,GACpC,kBArBK,CAAAL,kBAAkBA,CAAA,SAAAC,IAAA,CAAA+B,KAAA,MAAAC,SAAA,OAqBvB,CAEDrG,SAAS,CAAC,UAAM,CACjB,GAAM,CAAAsG,mBAAmB,CAAGpF,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,qBAAqB,CAAC,CAAC,CACnF,GAAIiF,mBAAmB,CAAE,CACvBzE,gBAAgB,CAACyE,mBAAmB,CAAC,CACvC,CAAC,IAAM,CACLlC,kBAAkB,EAAE,CACtB,CACC,CAAC,CAAE,EAAE,CAAC,CAENpE,SAAS,CAAC,UAAM,CACjB,GAAM,CAAAuG,UAAU,6BAAAC,KAAA,CAAAlC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAiC,SAAA,MAAA9B,GAAA,CAAAC,OAAA,QAAAL,mBAAA,GAAAO,IAAA,UAAA4B,UAAAC,SAAA,iBAAAA,SAAA,CAAA1B,IAAA,CAAA0B,SAAA,CAAAzB,IAAA,SAAAyB,SAAA,CAAAzB,IAAA,SACC,CAAAC,KAAK,oCAAAC,MAAA,CAAoC5D,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoC,EAAE,EAAI,CACxEyB,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACC,CAAC,CAAC,QALIX,GAAG,CAAAgC,SAAA,CAAApB,IAAA,CAAAoB,SAAA,CAAAzB,IAAA,SAMa,CAAAP,GAAG,CAACa,IAAI,EAAE,QAA1BZ,OAAO,CAAA+B,SAAA,CAAApB,IAAA,CACb9C,QAAQ,CAACmC,OAAO,CAAC,CAAC,wBAAA+B,SAAA,CAAAR,IAAA,MAAAM,QAAA,GACnB,kBATK,CAAAF,UAAUA,CAAA,SAAAC,KAAA,CAAAJ,KAAA,MAAAC,SAAA,OASf,CACDE,UAAU,EAAE,CACX,CAAC,CAAE,CAAC/E,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoC,EAAE,CAAC,CAAC,CAEd,GAAM,CAAAgD,aAAa,6BAAAC,KAAA,CAAAvC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAsC,SAAOC,cAAc,CAAEC,QAAQ,MAAApD,EAAA,CAAAqD,cAAA,CAAAC,eAAA,CAAAvC,GAAA,CAAAC,OAAA,QAAAL,mBAAA,GAAAO,IAAA,UAAAqC,UAAAC,SAAA,iBAAAA,SAAA,CAAAnC,IAAA,CAAAmC,SAAA,CAAAlC,IAAA,SAClDtB,EAAE,CAAGmD,cAAc,MAEnBA,cAAc,GAAK,KAAK,GAAAK,SAAA,CAAAlC,IAAA,UAAAkC,SAAA,CAAAlC,IAAA,SACG,CAAAC,KAAK,2CAA4C,CAC/EE,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACD+B,IAAI,CAAEnG,IAAI,CAACgF,SAAS,CAAC,CAAEoB,QAAQ,CAAE9F,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoC,EAAE,CAAE2D,UAAU,CAAEP,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEO,UAAW,CAAC,CAC5E,CAAC,CAAC,QANIN,cAAc,CAAAG,SAAA,CAAA7B,IAAA,CAAA6B,SAAA,CAAAlC,IAAA,SAQU,CAAA+B,cAAc,CAACzB,IAAI,EAAE,QAA7C0B,eAAe,CAAAE,SAAA,CAAA7B,IAAA,CACrB3B,EAAE,CAAGsD,eAAe,CAACH,cAAc,CAAC,OAAAK,SAAA,CAAAlC,IAAA,UAIpB,CAAAC,KAAK,sCAAAC,MAAA,CAAsCxB,EAAE,eAAAwB,MAAA,CAAa5D,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoC,EAAE,iBAAAwB,MAAA,CAAe4B,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEO,UAAU,EAAI,CACzHlC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACV,cAAc,CAAE,kBACf,CACF,CAAC,CAAC,SALIX,GAAG,CAAAyC,SAAA,CAAA7B,IAAA,CAAA6B,SAAA,CAAAlC,IAAA,UAOa,CAAAP,GAAG,CAACa,IAAI,EAAE,SAA1BZ,OAAO,CAAAwC,SAAA,CAAA7B,IAAA,CACbtD,WAAW,CAAC,CAAED,QAAQ,CAAE4C,OAAO,CAAEoC,QAAQ,CAARA,QAAQ,CAAED,cAAc,CAAEnD,EAAG,CAAC,CAAC,CAChEQ,kBAAkB,EAAE,CAAC,yBAAAgD,SAAA,CAAAjB,IAAA,MAAAW,QAAA,GACnB,kBA3BK,CAAAF,aAAaA,CAAAY,EAAA,CAAAC,GAAA,SAAAZ,KAAA,CAAAT,KAAA,MAAAC,SAAA,OA2BlB,CAED,GAAM,CAAAqB,WAAW,6BAAAC,KAAA,CAAArD,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAoD,SAAA,MAAAC,kBAAA,KAAAC,UAAA,CAAAC,mBAAA,CAAAd,cAAA,CAAAC,eAAA,QAAA3C,mBAAA,GAAAO,IAAA,UAAAkD,UAAAC,SAAA,iBAAAA,SAAA,CAAAhD,IAAA,CAAAgD,SAAA,CAAA/C,IAAA,cACjB9C,OAAO,CAAC8F,IAAI,EAAE,GAAK,EAAE,GAAAD,SAAA,CAAA/C,IAAA,iBAAA+C,SAAA,CAAAE,MAAA,kBAInBL,UAAU,CAAG,CACjBR,QAAQ,CAAE9F,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoC,EAAE,CAClB2D,UAAU,CAAEvF,QAAQ,SAARA,QAAQ,kBAAA6F,kBAAA,CAAR7F,QAAQ,CAAEgF,QAAQ,UAAAa,kBAAA,iBAAlBA,kBAAA,CAAoBN,UAAU,CAC1CnF,OAAO,CAAPA,OAAO,CACP2E,cAAc,CAAE/E,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAE+E,cAC5B,CAAC,CAED9E,WAAW,CAAC,SAAAgD,IAAI,SAAAc,aAAA,CAAAA,aAAA,IACXd,IAAI,MACPjD,QAAQ,IAAAoD,MAAA,CAAAgD,kBAAA,CAAMnD,IAAI,CAACjD,QAAQ,GAAE,CAAER,IAAI,CAAE,CAAEoC,EAAE,CAAEpC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoC,EAAG,CAAC,CAAExB,OAAO,CAAPA,OAAQ,CAAC,EAAC,IACjE,CAAC,CACHC,UAAU,CAAC,EAAE,CAAC,CAEdO,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEe,IAAI,CAAC,aAAa,CAAEmE,UAAU,CAAC,CAAC,KAEpCA,UAAU,CAACf,cAAc,GAAK,KAAK,GAAAkB,SAAA,CAAA/C,IAAA,WAAA+C,SAAA,CAAA/C,IAAA,SACR,CAAAC,KAAK,2CAA4C,CAC/EE,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACD+B,IAAI,CAAEnG,IAAI,CAACgF,SAAS,CAAC,CAAEoB,QAAQ,CAAE9F,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoC,EAAE,CAAE2D,UAAU,CAAEvF,QAAQ,SAARA,QAAQ,kBAAA+F,mBAAA,CAAR/F,QAAQ,CAAEgF,QAAQ,UAAAe,mBAAA,iBAAlBA,mBAAA,CAAoBR,UAAW,CAAC,CACtF,CAAC,CAAC,QANIN,cAAc,CAAAgB,SAAA,CAAA1C,IAAA,CAAA0C,SAAA,CAAA/C,IAAA,UAQU,CAAA+B,cAAc,CAACzB,IAAI,EAAE,SAA7C0B,eAAe,CAAAe,SAAA,CAAA1C,IAAA,CACrBuC,UAAU,CAACf,cAAc,CAAGG,eAAe,CAACH,cAAc,CAAC,QAAAkB,SAAA,CAAA/C,IAAA,UAGvD,CAAAC,KAAK,qCAAsC,CAC/CE,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACV,cAAc,CAAE,kBACf,CAAC,CACD+B,IAAI,CAAEnG,IAAI,CAACgF,SAAS,CAAC4B,UAAU,CACjC,CAAC,CAAC,SAEF1D,kBAAkB,EAAE,CAAC,yBAAA6D,SAAA,CAAA9B,IAAA,MAAAyB,QAAA,GACnB,kBA1CK,CAAAF,WAAWA,CAAA,SAAAC,KAAA,CAAAvB,KAAA,MAAAC,SAAA,OA0ChB,CAED,GAAM,CAAAgC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,CAAC,CAAK,CAC3B,GAAI,CAACA,CAAC,CAACC,GAAG,GAAK,OAAO,EAAID,CAAC,CAACC,GAAG,GAAK,QAAQ,EAAID,CAAC,CAACE,OAAO,GAAK,EAAE,GAAK,CAACpF,OAAO,CAAE,CAC7EkF,CAAC,CAACG,cAAc,EAAE,CAClBf,WAAW,EAAE,CACf,CACF,CAAC,CAED,GAAM,CAAAgB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzBtH,YAAY,CAACuH,UAAU,CAAC,aAAa,CAAC,CACtCvH,YAAY,CAACuH,UAAU,CAAC,YAAY,CAAC,CACrCvH,YAAY,CAACuH,UAAU,CAAC,qBAAqB,CAAC,CAC9CpF,QAAQ,CAAC,gBAAgB,CAAC,CAC5B,CAAC,CAED,mBACE/C,IAAA,QAAKoI,SAAS,CAAC,yDAAyD,CAAAC,QAAA,cAC1EnI,KAAA,QAAKkI,SAAS,CAAC,wFAAwF,CAAAC,QAAA,eAErGnI,KAAA,QAAKkI,SAAS,CAAC,iEAAiE,CAAAC,QAAA,eAC9EnI,KAAA,QAAKkI,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAC5CrI,IAAA,QAAAqI,QAAA,cAAKrI,IAAA,QAAKsI,GAAG,CAAE3I,GAAI,CAAC4I,KAAK,CAAE,EAAG,CAACC,MAAM,CAAE,EAAG,CAACJ,SAAS,CAAC,4CAA4C,CAACK,GAAG,CAAC,cAAc,EAAG,EAAM,cAC7HvI,KAAA,QAAKkI,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBrI,IAAA,OAAIoI,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAErH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE0H,QAAQ,EAAM,cAElE1I,IAAA,WAAQ2I,OAAO,CAAET,YAAa,CAACE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,QAAM,EAAS,GAC5F,GACF,cACNrI,IAAA,SAAM,cACNE,KAAA,QAAKkI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBrI,IAAA,QAAKoI,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,UAAQ,EAAM,cAC/DrI,IAAA,QAAKoI,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAEtCjH,aAAa,CAACwH,MAAM,CAAG,CAAC,CACtBxH,aAAa,CAACyH,GAAG,CAAC,SAAAC,KAAA,KAAG,CAAAvC,cAAc,CAAAuC,KAAA,CAAdvC,cAAc,CAAEvF,IAAI,CAAA8H,KAAA,CAAJ9H,IAAI,CAAEwE,WAAW,CAAAsD,KAAA,CAAXtD,WAAW,oBACpDxF,IAAA,QAAKoI,SAAS,CAAC,mDAAmD,CAAAC,QAAA,cAChEnI,KAAA,QAAKkI,SAAS,CAAC,kCAAkC,CAACO,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAvC,aAAa,CAACG,cAAc,CAAEvF,IAAI,CAAC,EAAC,CAAAqH,QAAA,eACnGrI,IAAA,QAAAqI,QAAA,cAAKrI,IAAA,QAAKsI,GAAG,CAAE3I,GAAI,CAACyI,SAAS,CAAC,8DAA8D,CAACK,GAAG,CAAC,cAAc,EAAG,EAAM,cACxHvI,KAAA,QAAKkI,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBrI,IAAA,OAAIoI,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAErH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE0H,QAAQ,EAAM,cACtE1I,IAAA,MAAGoI,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAErH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsE,KAAK,EAAK,GAE7D,GACF,EARgEiB,cAAc,CAShF,EACP,CAAC,cAAGvG,IAAA,QAAKoI,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CAAC,kBAAgB,EAAM,EAElG,GACF,GACF,cAGNnI,KAAA,QAAKkI,SAAS,CAAC,gEAAgE,CAAAC,QAAA,EAE3E,CAAA7G,QAAQ,SAARA,QAAQ,kBAAApB,mBAAA,CAARoB,QAAQ,CAAEgF,QAAQ,UAAApG,mBAAA,iBAAlBA,mBAAA,CAAoBsI,QAAQ,gBAC5BxI,KAAA,QAAKkI,SAAS,CAAC,+EAA+E,CAAAC,QAAA,eAC5FrI,IAAA,QAAKoI,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAACrI,IAAA,QAAKsI,GAAG,CAAE3I,GAAI,CAAC4I,KAAK,CAAE,EAAG,CAACC,MAAM,CAAE,EAAG,CAACJ,SAAS,CAAC,cAAc,CAACK,GAAG,CAAC,kBAAkB,EAAG,EAAM,cAC9HvI,KAAA,QAAKkI,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BrI,IAAA,OAAIoI,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAE7G,QAAQ,SAARA,QAAQ,kBAAAnB,mBAAA,CAARmB,QAAQ,CAAEgF,QAAQ,UAAAnG,mBAAA,iBAAlBA,mBAAA,CAAoBqI,QAAQ,EAAM,cAChF1I,IAAA,MAAGoI,SAAS,CAAC,6CAA6C,CAAAC,QAAA,CAAE7G,QAAQ,SAARA,QAAQ,kBAAAlB,mBAAA,CAARkB,QAAQ,CAAEgF,QAAQ,UAAAlG,mBAAA,iBAAlBA,mBAAA,CAAoBgF,KAAK,EAAK,GACtF,GACF,cAERpF,KAAA,QAAKkI,SAAS,CAAC,2CAA2C,CAAAC,QAAA,eACxDrI,IAAA,QAAKoI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,cACrCrI,IAAA,QAAKsI,GAAG,CAAC,aAAa,CAACG,GAAG,CAAC,MAAM,CAACL,SAAS,CAAC,eAAe,EAAG,EAC1D,cACNlI,KAAA,QAAKkI,SAAS,CAAC,MAAM,CAAAC,QAAA,EAEjB,CAAA7G,QAAQ,SAARA,QAAQ,kBAAAjB,kBAAA,CAARiB,QAAQ,CAAEA,QAAQ,UAAAjB,kBAAA,iBAAlBA,kBAAA,CAAoBqI,MAAM,EAAG,CAAC,CAC5BpH,QAAQ,CAACA,QAAQ,CAACqH,GAAG,CAAC,SAAAE,KAAA,CAAiCC,KAAK,KAAnC,CAAApH,OAAO,CAAAmH,KAAA,CAAPnH,OAAO,CAAAqH,UAAA,CAAAF,KAAA,CAAE/H,IAAI,CAAAkI,WAAA,CAAAD,UAAA,UAAW,CAAC,CAAC,CAAAA,UAAA,CAAT7F,EAAE,CAAA8F,WAAA,CAAF9F,EAAE,oBAC1CpD,IAAA,QAAKoI,SAAS,oEAAAxD,MAAA,CAAqExB,EAAE,IAAKpC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoC,EAAE,EAAG,4CAA4C,CAAG,6CAA6C,CAAG,CAAAiF,QAAA,cAClMrI,IAAA,QAAKoI,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAC/BzG,OAAO,EACF,EAHkMoH,KAAK,CAIzM,EACP,CAAC,cAAGhJ,IAAA,QAAKoI,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CAAC,aAAW,EAAM,cAEjGrI,IAAA,QAAKmJ,GAAG,CAAErG,UAAW,EAAG,GACpB,GACF,CAEJ,CAAAtB,QAAQ,SAARA,QAAQ,kBAAAhB,mBAAA,CAARgB,QAAQ,CAAEgF,QAAQ,UAAAhG,mBAAA,iBAAlBA,mBAAA,CAAoBkI,QAAQ,gBAC5BxI,KAAA,QAAKkI,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDrI,IAAA,CAACJ,KAAK,EACJwJ,WAAW,CAAC,mBAAmB,CAC/BC,KAAK,CAAEzH,OAAQ,CACf0H,SAAS,CAAEzB,aAAc,CACzB0B,QAAQ,CAAE,SAAAA,SAACzB,CAAC,QAAK,CAAAjG,UAAU,CAACiG,CAAC,CAAC0B,MAAM,CAACH,KAAK,CAAC,EAAC,CAC5CjB,SAAS,CAAC,SAAS,CACnBqB,cAAc,CAAC,4FAA4F,EAC3G,cACFzJ,IAAA,QAAKoI,SAAS,kDAAAxD,MAAA,CAAmD,CAAChD,OAAO,EAAI,qBAAqB,CAAG,CAAC+G,OAAO,CAAEzB,WAAY,CAAAmB,QAAA,cACzHnI,KAAA,QAAKwJ,KAAK,CAAC,4BAA4B,CAACtB,SAAS,CAAC,mCAAmC,CAACG,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACmB,OAAO,CAAC,WAAW,CAACC,WAAW,CAAC,KAAK,CAACC,MAAM,CAAC,OAAO,CAACC,IAAI,CAAC,MAAM,CAACC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAAA3B,QAAA,eACxNrI,IAAA,SAAM6J,MAAM,CAAC,MAAM,CAACI,CAAC,CAAC,eAAe,CAACH,IAAI,CAAC,MAAM,EAAG,cACpD9J,IAAA,SAAMkK,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,GAAG,EAAG,cACvCrK,IAAA,SAAMiK,CAAC,CAAC,+EAA+E,EAAG,GACtF,EACF,GACF,GAEJ,cAGNjK,IAAA,QAAKoI,SAAS,iHAAmH,CAAAC,QAAA,cAC/HnI,KAAA,WAAQkI,SAAS,CAAC,uBAAuB,CAACO,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAlG,cAAc,CAAC,CAACD,WAAW,CAAC,EAAC,CAAA6F,QAAA,eACpFnI,KAAA,QAAKwJ,KAAK,CAAC,4BAA4B,CAACtB,SAAS,yCAAAxD,MAAA,CAA0CpC,WAAW,CAAG,MAAM,CAAG,OAAO,CAAG,CAAC+F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACmB,OAAO,CAAC,WAAW,CAACC,WAAW,CAAC,KAAK,CAACC,MAAM,CAAC,OAAO,CAACC,IAAI,CAAC,MAAM,CAACC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAAA3B,QAAA,eAC/PrI,IAAA,SAAM6J,MAAM,CAAC,MAAM,CAACI,CAAC,CAAC,eAAe,CAACH,IAAI,CAAC,MAAM,EAAE,cACnD9J,IAAA,aAAUsK,MAAM,CAAC,iBAAiB,EAAG,GACjC,cACNtK,IAAA,QAAKoI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAE7F,WAAW,CAAG,EAAE,CAAG,aAAa,EAAO,GACzE,EACL,cAGNtC,KAAA,QAAKkI,SAAS,wDAAAxD,MAAA,CAAyDpC,WAAW,CAAG,MAAM,CAAG,EAAE,CAAG,CAAA6F,QAAA,eACjGrI,IAAA,QAAKoI,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/BrI,IAAA,WAAQoI,SAAS,CAAC,sBAAsB,CAACO,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAlG,cAAc,CAAC,KAAK,CAAC,EAAC,CAAA4F,QAAA,cAC5EnI,KAAA,QAAKwJ,KAAK,CAAC,4BAA4B,CAACtB,SAAS,CAAC,gCAAgC,CAACG,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACmB,OAAO,CAAC,WAAW,CAACC,WAAW,CAAC,GAAG,CAACC,MAAM,CAAC,OAAO,CAACC,IAAI,CAAC,MAAM,CAACC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAAA3B,QAAA,eACnNrI,IAAA,SAAM6J,MAAM,CAAC,MAAM,CAACI,CAAC,CAAC,eAAe,CAACH,IAAI,CAAC,MAAM,EAAE,cACnD9J,IAAA,SAAMkK,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,IAAI,EAAG,cACtCrK,IAAA,SAAMkK,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,EAAG,GAClC,EACC,EACL,cACNrK,IAAA,QAAKoI,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,SAAO,EAAM,cAC9DrI,IAAA,QAAKoI,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAEtCrG,KAAK,CAAC4G,MAAM,CAAG,CAAC,CACd5G,KAAK,CAAC6G,GAAG,CAAC,SAAA0B,KAAA,KAAG,CAAAC,MAAM,CAAAD,KAAA,CAANC,MAAM,CAAExJ,IAAI,CAAAuJ,KAAA,CAAJvJ,IAAI,oBACvBhB,IAAA,QAAKoI,SAAS,CAAC,mDAAmD,CAAAC,QAAA,cAChEnI,KAAA,QAAKkI,SAAS,CAAC,kCAAkC,CAACO,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAvC,aAAa,CAAC,KAAK,CAAEpF,IAAI,CAAC,EAAC,CAAAqH,QAAA,eAC1FrI,IAAA,QAAAqI,QAAA,cAAKrI,IAAA,QAAKsI,GAAG,CAAE3I,GAAI,CAACyI,SAAS,CAAC,8DAA8D,CAACK,GAAG,CAAC,gBAAgB,EAAG,EAAM,cAC1HvI,KAAA,QAAKkI,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBrI,IAAA,OAAIoI,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAErH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE0H,QAAQ,EAAM,cACtE1I,IAAA,MAAGoI,SAAS,CAAC,6CAA6C,CAAAC,QAAA,CAAErH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsE,KAAK,EAAK,GACxE,GACF,EAPgEkF,MAAM,CAQxE,EACP,CAAC,cAAGxK,IAAA,QAAKoI,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CAAC,eAAa,EAAM,EAE/F,GACF,GACF,EACF,CAGN,CAAC,CAED,cAAe,CAAAlI,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}